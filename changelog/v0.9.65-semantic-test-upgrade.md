# v0.9.65 - Semantic Test Generator Upgrade & Architectural Cleanup

## ğŸš€ Overview
This release completes the Phase 2 architectural refactoring and the Phase 3/5 upgrade for the Automated Test Generator, ensuring full compatibility with the Tree-sitter parsing engine and robust metadata persistence.

## ğŸ—ï¸ Architectural Refactoring (Phase 2)
Decoupled large, multi-responsibility modules to improve code health and maintainability:
- **`single-file.js`**: Logic extracted to `single-file-utils.js` (construction) and `single-file-db.js` (persistence).
- **`mixin-namespace-linker.js`**: Logic extracted to `namespace-detector.js`, `mixin-detector.js`, and `calledby-linker-utils.js`.
- **`debounced-batch-writer.js`**: Split into `batch-writer-queue.js` and `batch-writer-flusher.js`.

## ğŸŒ³ Tree-sitter Migration Completion
- **`atomic-edit` Tool**: Replaced `@babel/parser` with the unified Tree-sitter engine for syntax validation.
- **Constants Cleanup**: Removed obsolete Babel configuration from `event-detector/constants.js`.

## ğŸ’¾ Core Metadata & Persistence Fixes
- **SQLite Sync**: Fixed a synchronization issue in `system-map.js` where `imports_json` and `exports_json` were being lost in the `files` table after the Layer A transition.
- **Tree-sitter Fallback (Shims)**: Added backward compatibility shims in `atom-query.js` and `test-utils.js` to provide virtual `dataFlow.inputs` for Tree-sitter atoms, unblocking the test generator.

## ğŸ§ª Automated Test Generation (Smart Mocks)
- **Tool Fix**: Corrected parameter handling in the `mcp_omnysys_generate_tests` tool.
- **Reference Repair**: Fixed a persistent `ERR_MODULE_NOT_FOUND` crash in the MCP server by correcting the internal import path for the `data-flow` extractor.

## âš ï¸ Known Issues
- Transient "server name omnysys not found" errors observed during server hot-reloads; Investigating stdio-bridge link stability.
