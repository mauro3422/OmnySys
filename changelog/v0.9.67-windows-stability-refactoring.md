# Changelog - v0.9.67 (Windows Stability & High-Impact Refactoring)

Este registro documenta las mejoras realizadas en las Fases 10 y 11, enfocadas en la estabilidad en Windows y la desomposici√≥n de componentes complejos.

## üöÄ Mejoras de Estabilidad (Windows)

- **Eliminaci√≥n de "Terminales Fantasma"**: Se realiz√≥ una auditor√≠a en todo el sistema para asegurar que todas las llamadas a `child_process` incluyan `windowsHide: true`, evitando el parpadeo de ventanas negras.
- **Validaci√≥n Est√°tica**: Se implement√≥ el script `scripts/utils/check-windows-hide.js` para verificar autom√°ticamente esta regla en el futuro.

## üèóÔ∏è Refactorizaci√≥n Arquitect√≥nica (High-Impact)

- **Modularizaci√≥n del Adaptador de Almacenamiento**:
  - `src/layer-c-memory/storage/repository/adapters/helpers/system-map.js` fue descompuesto en manejadores tem√°ticos espec√≠ficos:
    - `handlers/file-handler.js`: Gesti√≥n de metadatos de archivos.
    - `handlers/dependency-handler.js`: Gesti√≥n de dependencias entre archivos.
    - `handlers/semantic-handler.js`: Persistencia de conexiones sem√°nticas y issues.
    - `handlers/risk-handler.js`: Gesti√≥n de evaluaciones de riesgo.
- **Sanitizaci√≥n de Herramientas de Auditor√≠a (Grados D/F -> A)**:
  - Se modularizaron y limpiaron los siguientes scripts internos:
    - `scripts/audit-data-integrity.js`
    - `scripts/validate-graph-system.js`
    - `scripts/audit-data-flow.js`
    - `scripts/audit-full-scan.js`

- Mejora en la consistencia de nombres y exportaciones para evitar conflictos de namespace.

## üõ†Ô∏è Orquestaci√≥n de Refactorizaci√≥n y Auto-Correcci√≥n (Fases 11-13)

- **Smart Move Orchestrator**:
  - Nueva herramienta `move_file` que automatiza el movimiento f√≠sico y la actualizaci√≥n de todos los imports globales.
  - Implementaci√≥n de `fix_imports` para reparaci√≥n consultiva de rutas rotas.
- **SOLID Splitting Semiautom√°tico**:
  - Nueva herramienta `execute_solid_split` que propone divisiones de funciones basadas en cohesi√≥n.
  - Integraci√≥n de **Atomic Transactions** para permitir rollbacks de m√∫ltiples pasos en refactorizaciones complejas.
- **Unificaci√≥n de DX (Auto-Fix)**:
  - Implementaci√≥n del flag `autoFix` en `atomic_edit` y `atomic_write`.
  - Reparaci√≥n autom√°tica en cascada: el sistema ahora puede arreglar autom√°ticamente todos los archivos que dependen de una funci√≥n cuya firma ha cambiado, garantizando integridad at√≥mica.
  - **Categorizaci√≥n de Incidentes**: Mejora en `get_recent_errors` para clasificar fallos at√≥micos, transaccionales y de base de datos.

## ü©π Hotfix - Estabilidad de Rutas ESM (Fase 14)

- **Correcci√≥n de Imports Relativos**: Se resolvieron errores de `ERR_MODULE_NOT_FOUND` en el m√≥dulo `atomic-edit` mediante la correcci√≥n de rutas de backtracking (`../../` vs `../`) hacia el `AnalysisEngine`.
- **Auditor√≠a de Dependencias**: Verificaci√≥n exhaustiva de todas las herramientas de las Fases 11-13 para asegurar compatibilidad total con la estructura modular de OmnySys.

---
*Fecha: 2026-02-26*
