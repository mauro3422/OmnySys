# Changelog v0.9.72: Zero-Allocation TreeCursor & Pipeline Stabilization (Mar 2026)

##  Features & Optimizaciones Masivas
* **Node.js Native TreeCursor Adoption (La Gran Victoria):**
   * **El Problema:** La Fase 4 colapsaba los CPUs y la RAM (exig铆a ~300+ segundos y >2GB de memoria para 2000 archivos). Los Profilings de Node V8 revelaron que la lectura recursiva de `node.namedChildren` forzaba a los bindings C++ de Tree-Sitter a generar millones de envolventes in煤tiles de estado en "JavaScript Arrays", saturando el Garbage Collector por completo.
   * **La Soluci贸n:** Se refactorizaron los analizadores centrales (`state-parser.js`, `detector.js` y utilidades del AST) para emplear **Nativo `TreeCursor`**. El cursor viaja nativamente en memoria C y previene la creaci贸n de objetos de Node.js en un 99% mediante verificaciones estrictas de `.nodeType` antes de instanciar un `.currentNode`.
   * **El Resultado:** Reducci贸n del procesamiento de Extracci贸n Unificada (Fase 4) de **305 segundos a solo 3.8 segundos** (Mejora de ~80x procesando 1500+ items por segundo) y eliminaci贸n absoluta de los Out-Of-Memory limitando el Heap fuertemente.

##  Bug Fixes
* **Turbo Mode / Hash Skipping Restablecido:**
   * **Root Cause:** Los Triggers de SQL en la creaci贸n de tomos operaban con un falso `INSERT OR REPLACE INTO files` que causaba la eliminaci贸n (DROP) y recreaci贸n del archivo en SQLite cada vez que se agregaba un 谩tomo, reseteando la columna del `hash` y rompiendo el Turbo Mode.
   * **Fix:** Convertidos los triggers de `schema.sql` a UPSERT verdaderos (`ON CONFLICT(path) DO UPDATE SET`) para mantener intacto el `hash` y otros metadatos. El Pipeline salta fluidamente el 99% de los archivos modificados.
* **Phase 8 System Graph Crash:**
   * Resuelto el error cr铆tico `Cannot read properties of undefined (reading 'functions')` reubicando las validaciones preventivas antes del acceso a las propiedades internas del Info Node.
* **node-tree-sitter Getter Bug:**
   * Solucionada la discrepancia de APIs de parsers nativos donde `.currentNode` se invocaba as 氅 (`()`) rompiendo la extracci贸n en `field-checker`, pas谩ndolo correctamente por propiedad getter.

## 锔 Core Architecture / Database
* **SQLite Single-Transaction Batching:** 
   * Se modific贸 `unified-analysis.js` para detener la carga de los 60 items individuales del pool as铆ncrono y enviarlos aglutinados bajo un solo `saveManyBulk`. Redujo fuertemente el cuello de botella I/O en hardware de Windows.
* **Memory Pruning Quir煤rgico:** Implementada limpieza severa durante la validaci贸n para descolgar la retenci贸n en memoria del Array Master Central una vez que se escribieron los hashes a disco duro.

---
**Status Actual:** Core System (Fase A) ultra-estable con 2000+ archivos operando limpio en Single-Thread Concurrency en modo Turbo. Pr贸ximo paso planificado bajo el pedido arquitect贸nico: **True Worker Threads Phase 4 Migration**.
