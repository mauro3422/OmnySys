/**
 * @fileoverview index.test.js
 * 
 * Tests for the comprehensive-extractor module exports
 * 
 * @module tests/unit/layer-a-analysis/extractors/comprehensive-extractor/index
 */

import { describe, it, expect } from 'vitest';
import * as ComprehensiveExtractorModule from '#layer-a/extractors/comprehensive-extractor/index.js';

describe('Comprehensive Extractor Module - Index', () => {
  describe('Core Exports', () => {
    it('should export ComprehensiveExtractor class', () => {
      expect(ComprehensiveExtractorModule.ComprehensiveExtractor).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.ComprehensiveExtractor).toBe('function');
    });

    it('should export createExtractor function', () => {
      expect(ComprehensiveExtractorModule.createExtractor).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.createExtractor).toBe('function');
    });

    it('should export extractComprehensiveMetadata (legacy)', () => {
      expect(ComprehensiveExtractorModule.extractComprehensiveMetadata).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.extractComprehensiveMetadata).toBe('function');
    });
  });

  describe('Config Exports', () => {
    it('should export DEFAULT_CONFIG', () => {
      expect(ComprehensiveExtractorModule.DEFAULT_CONFIG).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.DEFAULT_CONFIG).toBe('object');
    });

    it('should export EXTRACTOR_STATS', () => {
      expect(ComprehensiveExtractorModule.EXTRACTOR_STATS).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.EXTRACTOR_STATS).toBe('object');
    });

    it('should export DETAIL_LEVELS', () => {
      expect(ComprehensiveExtractorModule.DETAIL_LEVELS).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.DETAIL_LEVELS).toBe('object');
    });

    it('should export mergeConfig', () => {
      expect(ComprehensiveExtractorModule.mergeConfig).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.mergeConfig).toBe('function');
    });
  });

  describe('Metadata Exports', () => {
    it('should export extractBasicMetadata', () => {
      expect(ComprehensiveExtractorModule.extractBasicMetadata).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.extractBasicMetadata).toBe('function');
    });

    it('should export detectFileCategory', () => {
      expect(ComprehensiveExtractorModule.detectFileCategory).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.detectFileCategory).toBe('function');
    });

    it('should export calculateFileIndicators', () => {
      expect(ComprehensiveExtractorModule.calculateFileIndicators).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.calculateFileIndicators).toBe('function');
    });
  });

  describe('Metrics Exports', () => {
    it('should export calculateMetrics', () => {
      expect(ComprehensiveExtractorModule.calculateMetrics).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.calculateMetrics).toBe('function');
    });

    it('should export calculateComplexityScore', () => {
      expect(ComprehensiveExtractorModule.calculateComplexityScore).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.calculateComplexityScore).toBe('function');
    });
  });

  describe('Patterns Exports', () => {
    it('should export detectPatterns', () => {
      expect(ComprehensiveExtractorModule.detectPatterns).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.detectPatterns).toBe('function');
    });

    it('should export detectPatternsByName', () => {
      expect(ComprehensiveExtractorModule.detectPatternsByName).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.detectPatternsByName).toBe('function');
    });
  });

  describe('Completeness Exports', () => {
    it('should export calculateCompleteness', () => {
      expect(ComprehensiveExtractorModule.calculateCompleteness).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.calculateCompleteness).toBe('function');
    });

    it('should export shouldNeedLLM', () => {
      expect(ComprehensiveExtractorModule.shouldNeedLLM).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.shouldNeedLLM).toBe('function');
    });

    it('should export countActiveExtractors', () => {
      expect(ComprehensiveExtractorModule.countActiveExtractors).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.countActiveExtractors).toBe('function');
    });

    it('should export assessQuality', () => {
      expect(ComprehensiveExtractorModule.assessQuality).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.assessQuality).toBe('function');
    });
  });

  describe('Function Extractor Exports', () => {
    it('should export extractFunctions', () => {
      expect(ComprehensiveExtractorModule.extractFunctions).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.extractFunctions).toBe('function');
    });

    it('should export extractFunctionCalls', () => {
      expect(ComprehensiveExtractorModule.extractFunctionCalls).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.extractFunctionCalls).toBe('function');
    });

    it('should export extractRecursiveFunctions', () => {
      expect(ComprehensiveExtractorModule.extractRecursiveFunctions).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.extractRecursiveFunctions).toBe('function');
    });

    it('should export extractHigherOrderFunctions', () => {
      expect(ComprehensiveExtractorModule.extractHigherOrderFunctions).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.extractHigherOrderFunctions).toBe('function');
    });

    it('should export extractAsyncPatterns', () => {
      expect(ComprehensiveExtractorModule.extractAsyncPatterns).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.extractAsyncPatterns).toBe('function');
    });
  });

  describe('Class Extractor Exports', () => {
    it('should export extractClasses', () => {
      expect(ComprehensiveExtractorModule.extractClasses).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.extractClasses).toBe('function');
    });

    it('should export extractClassMethods', () => {
      expect(ComprehensiveExtractorModule.extractClassMethods).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.extractClassMethods).toBe('function');
    });

    it('should export extractClassProperties', () => {
      expect(ComprehensiveExtractorModule.extractClassProperties).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.extractClassProperties).toBe('function');
    });

    it('should export extractInheritanceHierarchy', () => {
      expect(ComprehensiveExtractorModule.extractInheritanceHierarchy).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.extractInheritanceHierarchy).toBe('function');
    });

    it('should export calculateInheritanceDepth', () => {
      expect(ComprehensiveExtractorModule.calculateInheritanceDepth).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.calculateInheritanceDepth).toBe('function');
    });

    it('should export extractMixins', () => {
      expect(ComprehensiveExtractorModule.extractMixins).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.extractMixins).toBe('function');
    });

    it('should export extractClassBody', () => {
      expect(ComprehensiveExtractorModule.extractClassBody).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.extractClassBody).toBe('function');
    });

    it('should export extractImplements', () => {
      expect(ComprehensiveExtractorModule.extractImplements).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.extractImplements).toBe('function');
    });

    it('should export extractDecorators', () => {
      expect(ComprehensiveExtractorModule.extractDecorators).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.extractDecorators).toBe('function');
    });
  });

  describe('Import Extractor Exports', () => {
    it('should export extractImports', () => {
      expect(ComprehensiveExtractorModule.extractImports).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.extractImports).toBe('function');
    });

    it('should export extractDynamicImports', () => {
      expect(ComprehensiveExtractorModule.extractDynamicImports).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.extractDynamicImports).toBe('function');
    });

    it('should export extractImportAliases', () => {
      expect(ComprehensiveExtractorModule.extractImportAliases).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.extractImportAliases).toBe('function');
    });

    it('should export extractBarrelImports', () => {
      expect(ComprehensiveExtractorModule.extractBarrelImports).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.extractBarrelImports).toBe('function');
    });

    it('should export extractUnusedImports', () => {
      expect(ComprehensiveExtractorModule.extractUnusedImports).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.extractUnusedImports).toBe('function');
    });
  });

  describe('Export Extractor Exports', () => {
    it('should export extractExports', () => {
      expect(ComprehensiveExtractorModule.extractExports).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.extractExports).toBe('function');
    });

    it('should export parseCommonJSExports', () => {
      expect(ComprehensiveExtractorModule.parseCommonJSExports).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.parseCommonJSExports).toBe('function');
    });

    it('should export categorizeES6Exports', () => {
      expect(ComprehensiveExtractorModule.categorizeES6Exports).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.categorizeES6Exports).toBe('function');
    });

    it('should export determineExportStyle', () => {
      expect(ComprehensiveExtractorModule.determineExportStyle).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.determineExportStyle).toBe('function');
    });

    it('should export analyzeExportPatterns', () => {
      expect(ComprehensiveExtractorModule.analyzeExportPatterns).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.analyzeExportPatterns).toBe('function');
    });

    it('should export extractBarrelPattern', () => {
      expect(ComprehensiveExtractorModule.extractBarrelPattern).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.extractBarrelPattern).toBe('function');
    });

    it('should export calculateExportMetrics', () => {
      expect(ComprehensiveExtractorModule.calculateExportMetrics).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.calculateExportMetrics).toBe('function');
    });

    it('should export extractUnusedExports', () => {
      expect(ComprehensiveExtractorModule.extractUnusedExports).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.extractUnusedExports).toBe('function');
    });
  });

  describe('Parser Exports', () => {
    it('should export PARSER_CONFIG', () => {
      expect(ComprehensiveExtractorModule.PARSER_CONFIG).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.PARSER_CONFIG).toBe('object');
    });

    it('should export parseAST', () => {
      expect(ComprehensiveExtractorModule.parseAST).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.parseAST).toBe('function');
    });

    it('should export findNodesByType', () => {
      expect(ComprehensiveExtractorModule.findNodesByType).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.findNodesByType).toBe('function');
    });

    it('should export findFunctions', () => {
      expect(ComprehensiveExtractorModule.findFunctions).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.findFunctions).toBe('function');
    });

    it('should export findArrowFunctions', () => {
      expect(ComprehensiveExtractorModule.findArrowFunctions).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.findArrowFunctions).toBe('function');
    });

    it('should export findClasses', () => {
      expect(ComprehensiveExtractorModule.findClasses).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.findClasses).toBe('function');
    });

    it('should export findImports', () => {
      expect(ComprehensiveExtractorModule.findImports).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.findImports).toBe('function');
    });

    it('should export findExports', () => {
      expect(ComprehensiveExtractorModule.findExports).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.findExports).toBe('function');
    });

    it('should export findMethods', () => {
      expect(ComprehensiveExtractorModule.findMethods).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.findMethods).toBe('function');
    });
  });

  describe('Default Export', () => {
    it('should have default export (extractComprehensiveMetadata)', () => {
      expect(ComprehensiveExtractorModule.default).toBeDefined();
      expect(typeof ComprehensiveExtractorModule.default).toBe('function');
    });
  });

  describe('Functional Integration', () => {
    it('createExtractor should create working extractor', () => {
      const extractor = ComprehensiveExtractorModule.createExtractor();
      expect(extractor).toBeDefined();
      expect(typeof extractor.extract).toBe('function');
    });

    it('extractComprehensiveMetadata should work as standalone function', () => {
      const result = ComprehensiveExtractorModule.extractComprehensiveMetadata(
        'test.js',
        'function test() { return 1; }'
      );
      expect(result).toBeDefined();
      expect(result.basic).toBeDefined();
    });
  });
});
